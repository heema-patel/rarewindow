"use strict";(self["webpackChunkthe_rare_window"]=self["webpackChunkthe_rare_window"]||[]).push([[78],{8951:function(e,t,i){i.r(t),i.d(t,{default:function(){return We}});var a=i(73396),s=i(87139),l=i(49242),o=i(8433),r=i(29973),n=i(45754);const d=e=>((0,a.dD)("data-v-2391ff88"),e=e(),(0,a.Cn)(),e),c={class:"min-h-screen bg-ext-light-pink"},p={class:"absolute bottom-0 w-full lg:flex top-16"},m={class:"self-center flex-grow hidden lg:block"},u=d((()=>(0,a._)("h1",{class:"mb-4 text-2xl font-bold md:text-3xl flex justify-center"}," City Map Gifts ",-1))),g={class:"flex-shrink bg-white relative xl:w-[512px] lg:w-[380px] sideBar"},h={class:"fixed z-10 grid w-full grid-cols-4 mb-6 text-sm font-semibold text-center bg-white lg:grid-cols-3 sm:text-base shadow-ext-bottom-2 lg:relative lg:w-auto"},b=d((()=>(0,a._)("img",{src:o,alt:"",class:"mx-auto mb-2"},null,-1))),f=(0,a.Uk)(" Preview* "),x=[b,f],k=["src"],w=(0,a.Uk)(" Design "),y=["src"],v=(0,a.Uk)(" Details "),T=d((()=>(0,a._)("img",{src:r,alt:"",class:"mx-auto mb-1"},null,-1))),S=(0,a.Uk)(" Format "),C=[T,S],M={class:"relative h-48 mx-5 mb-5 rounded-md shadow"},_={class:"px-5 mb-8"},D=d((()=>(0,a._)("div",{class:"mb-2 font-semibold"},"Title*",-1))),z=d((()=>(0,a._)("small",{class:"text-xs text-ext-gray"},"Max 40 characters",-1))),F={class:"pt-2"},P=d((()=>(0,a._)("label",{for:"af"},"Alternative font",-1))),W={class:"px-5 mb-8"},I=d((()=>(0,a._)("div",{class:"mb-2 font-semibold"},"Subtext*",-1))),A=d((()=>(0,a._)("small",{class:"text-xs text-ext-gray"},"Max 40 characters",-1))),O={key:0,class:"px-5 mb-8"},U=d((()=>(0,a._)("div",{class:"mb-2 font-semibold"},"Gifting message",-1))),V=d((()=>(0,a._)("div",{class:"my-2 text-xs text-ext-gray"}," Extra charges would apply for gifting ",-1))),$=(0,a.Uk)(" Add gift wrapping "),Z={class:"fixed inset-x-0 bottom-0 z-10 flex items-center justify-between p-2 bg-white shadow-sm sm:p-4 lg:absolute"},j={class:"text-2xl font-semibold"},G={key:0},q={class:"flex items-center"},L=d((()=>(0,a._)("img",{src:n,alt:"arrow",class:"mr-1 rotate-180"},null,-1))),B=(0,a.Uk)(" Previous "),N=[L,B],R=d((()=>(0,a._)("img",{src:n,alt:"arrow",class:"ml-1"},null,-1))),E=(0,a.Uk)(" Customize "),H=d((()=>(0,a._)("img",{src:n,alt:"arrow",class:"ml-1"},null,-1))),K=[E,H],Y={key:0,class:"self-center flex-grow block px-8 pt-20 lg:hidden"},J=d((()=>(0,a._)("h1",{class:"mb-2 md:mb-4 text-2xl md:text-3xl font-bold flex justify-center"}," City Map Gifts ",-1)));function Q(e,t,o,r,n,d){const b=(0,a.up)("AppHeader"),f=(0,a.up)("app-loader"),T=(0,a.up)("TimeCapsulePreview"),S=(0,a.up)("frame-size"),L=(0,a.up)("location-input"),B=(0,a.up)("map-component"),E=(0,a.up)("map-styling"),H=(0,a.up)("map-marker"),Q=(0,a.up)("frame-color"),X=(0,a.up)("printing-type");return(0,a.wg)(),(0,a.iD)("div",c,[(0,a.Wm)(b),(0,a.Wm)(f,{show:n.loader},null,8,["show"]),(0,a._)("div",p,[(0,a._)("div",m,[u,(0,a.Wm)(T)]),(0,a._)("div",g,[(0,a._)("ul",h,[(0,a._)("li",{class:(0,s.C_)(["py-2 cursor-pointer lg:hidden",d.previewSelected?"border-b-2 border-ext-yellow bg-ext-yellow text-white":"bg-dark text-white"]),onClick:t[0]||(t[0]=e=>n.selectedTab="preview")},x,2),(0,a._)("li",{class:(0,s.C_)(["py-2 cursor-pointer",d.designSelected||"design"==n.lastActiveTab?"border-b-2 border-black":"opacity-50"]),onClick:t[1]||(t[1]=e=>d.previewSelected&&(n.selectedTab=n.lastActiveTab))},[(0,a._)("img",{src:n.tabDesignValidated?i(81183):i(82917),alt:"",class:"mx-auto mb-1"},null,8,k),w],2),(0,a._)("li",{class:(0,s.C_)(["py-2 cursor-pointer",d.detailsSelected||"details"==n.lastActiveTab?"border-b-2 border-black":"opacity-50"]),onClick:t[2]||(t[2]=e=>d.previewSelected&&(n.selectedTab=n.lastActiveTab))},[(0,a._)("img",{src:n.tabDetailsValidated?i(81183):i(20349),alt:"",class:"mx-auto mb-1"},null,8,y),v],2),(0,a._)("li",{class:(0,s.C_)(["py-2 cursor-pointer",d.formatSelected||"format"==n.lastActiveTab?"border-b-2 border-black":"opacity-50"]),onClick:t[3]||(t[3]=e=>d.previewSelected&&(n.selectedTab=n.lastActiveTab))},C,2)]),(0,a._)("div",{ref:"options",class:(0,s.C_)(["absolute inset-x-0 bottom-0 pb-16 overflow-y-auto top-24",d.previewSelected?"hidden":""])},[(0,a.wy)((0,a._)("div",null,[(0,a.Wm)(S),(0,a.Wm)(L,{ref:"locationInput",onUpdateCenter:t[4]||(t[4]=e=>{e?(d.updateLocation(e,1),n.locationAdded=!0):n.locationAdded=!1})},null,512),(0,a.wy)((0,a._)("div",M,[(0,a.Wm)(B,{api:e.getMapStyle[0].mapTileApi,marker:e.getMapMarker[0],markerIndex:e.getMapMarker[0].index,markerType:e.getMapMarker[0].type,center:e.getCenter[0],index:0,showNav:"",ref:"mapComponent"},null,8,["api","marker","markerIndex","markerType","center"])],512),[[l.F8,d.mobileView]]),(0,a.Wm)(E,{onUpdateStyle:t[5]||(t[5]=e=>d.updateMapStyle(e,1))}),(0,a.Wm)(H,{onUpdateMarker:t[6]||(t[6]=e=>d.updateMapMarker(e,1))})],512),[[l.F8,d.designSelected]]),(0,a.wy)((0,a._)("div",null,[(0,a._)("div",_,[D,(0,a.wy)((0,a._)("input",{type:"text",class:(0,s.C_)(["form-control","title"==n.focus&&""==n.title?"errorInput":""]),placeholder:"Your title goes here",maxlength:"40","onUpdate:modelValue":t[7]||(t[7]=e=>n.title=e),onInput:t[8]||(t[8]=t=>e.setImageTitle(n.title))},null,34),[[l.nr,n.title]]),z,(0,a._)("div",F,[(0,a.wy)((0,a._)("input",{id:"af",type:"checkbox",class:"inputCheckSq","onUpdate:modelValue":t[9]||(t[9]=e=>n.alternativeFont=e),onChange:t[10]||(t[10]=t=>e.setAlternativeFont(n.alternativeFont))},null,544),[[l.e8,n.alternativeFont]]),P])]),(0,a._)("div",W,[I,(0,a.wy)((0,a._)("input",{type:"text",class:(0,s.C_)(["form-control","subtitle"==n.focus&&""==n.subTitle?"errorInput":""]),placeholder:"Subtext about your title",maxlength:"40","onUpdate:modelValue":t[11]||(t[11]=e=>n.subTitle=e),onInput:t[12]||(t[12]=t=>e.setImageSubTitle(n.subTitle))},null,34),[[l.nr,n.subTitle]]),A])],512),[[l.F8,d.detailsSelected]]),(0,a.wy)((0,a._)("div",null,[(0,a.Wm)(Q,{onUpdateFrameColor:t[13]||(t[13]=t=>{e.setFrameColor(t.color),e.checkPrice("momentMap")})}),(0,a.Wm)(X,{onSelectedPrintingType:t[14]||(t[14]=e=>d.updatePrintType(e))}),"Digital Copy"!=n.printType?((0,a.wg)(),(0,a.iD)("div",O,[U,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",maxlength:"100",placeholder:"Write your message","onUpdate:modelValue":t[15]||(t[15]=e=>n.giftingMessage=e),onChange:t[16]||(t[16]=t=>e.setGiftingMessage(n.giftingMessage))},null,544),[[l.nr,n.giftingMessage]]),V,(0,a.wy)((0,a._)("input",{type:"checkbox",class:"mr-2 inputCheckSq","onUpdate:modelValue":t[17]||(t[17]=e=>n.giftWrapping=e),onChange:t[18]||(t[18]=t=>{e.setGiftWrapping(n.giftWrapping),e.checkPrice("momentMap")})},null,544),[[l.e8,n.giftWrapping]]),$])):(0,a.kq)("",!0)],512),[[l.F8,d.formatSelected]])],2),(0,a._)("div",Z,[(0,a._)("span",j,[d.formatSelected?((0,a.wg)(),(0,a.iD)("span",G,"â‚¹ "+(0,s.zw)(e.getPrice),1)):(0,a.kq)("",!0)]),(0,a._)("div",q,[d.designSelected||d.previewSelected?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,class:"mr-2 btn-outline",onClick:t[19]||(t[19]=(...e)=>d.back&&d.back(...e))},N)),d.previewSelected?((0,a.wg)(),(0,a.iD)("button",{key:2,class:"btn-primary",onClick:t[21]||(t[21]=(0,l.iM)((e=>n.selectedTab="design"),["prevent"]))},K)):((0,a.wg)(),(0,a.iD)("button",{key:1,class:(0,s.C_)(["btn-primary",d.formatSelected&&0==e.getPrice?"hidden":""]),onClick:t[20]||(t[20]=(...e)=>d.next&&d.next(...e))},[(0,a.Uk)((0,s.zw)(d.ctaBtnText)+" ",1),R],2))])]),d.previewSelected?((0,a.wg)(),(0,a.iD)("div",Y,[J,(0,a.Wm)(T)])):(0,a.kq)("",!0)])])])}const X={class:"px-5 mb-5"},ee=(0,a._)("div",{class:"mb-3 font-semibold"},"Frame Size:",-1);function te(e,t,i,s,l,o){const r=(0,a.up)("radio-option-list");return(0,a.wg)(),(0,a.iD)("div",X,[ee,(0,a.Wm)(r,{options:l.frameOptions,onUpdateSelect:o.updateSize,defaultSelect:l.frameOptions[0].val,name:"frameSize"},null,8,["options","onUpdateSelect","defaultSelect"])])}var ie=i(20065),ae=i(63420),se={components:{RadioOptionList:ae.Z},data(){return{frameOptions:[{val:"8x12",label:'8 x 12"'},{val:"8x8",label:'8 x 8"'}]}},methods:{...(0,ie.OI)("momentMap",["setFrameSize"]),updateSize(e){this.setFrameSize(e)}}},le=i(40089);const oe=(0,le.Z)(se,[["render",te]]);var re=oe,ne=i(41345),de=i(69770),ce=i(59280),pe=i(60009),me=i(37749),ue=i(19658),ge=i(11096),he=i(47532);const be=e=>((0,a.dD)("data-v-f1abb2ca"),e=e(),(0,a.Cn)(),e),fe={class:"bg-white"},xe={class:"h-full p-1"},ke={class:"relative flex flex-col w-full h-full"},we=be((()=>(0,a._)("img",{src:he,alt:"",class:"absolute z-30 h-full pointer-events-none opacity-20"},null,-1))),ye={class:"border border-black map-wrap"},ve={class:"md:text-xs text-[8px]"},Te=be((()=>(0,a._)("p",{class:"mt-5 text-xs text-center opacity-60"}," *Preview is adjusted as per your screen size, actual print would be to the size. ",-1)));function Se(e,t,i,l,o,r){const n=(0,a.up)("map-component");return(0,a.wg)(),(0,a.iD)("span",fe,[(0,a._)("div",{ref:"product",class:(0,s.C_)(["preview w-10/12 md:w-[300px] lg:w-[380px] xl:w-[400px]","frame"+e.selectedOption.frameSize]),style:(0,s.j5)({outlineColor:e.selectedOption.frameColor.color})},[(0,a._)("div",xe,[(0,a._)("div",ke,[we,(0,a._)("div",ye,[(0,a.Wm)(n,{api:e.getMapStyle[0].mapTileApi,marker:e.getMapMarker[0],markerIndex:e.getMapMarker[0].index,markerType:e.getMapMarker[0].type,center:e.getCenter[0],index:0,frameSize:e.selectedFrameSize,showNav:""},null,8,["api","marker","markerIndex","markerType","center","frameSize"])]),(0,a._)("div",{id:"textOnMap",class:"h-16 md:h-24",style:(0,s.j5)({background:e.getMapStyle.contentBgColor})},[(0,a._)("div",{id:"textScriptPTbold",class:(0,s.C_)(e.getAlternativeFont?"font-bold text-xs md:text-sm lg:text-base mb-1":"font-ext-ScriptPTbold text-sm md:text-base lg:text-lg")},(0,s.zw)(e.selectedOption.title),3),(0,a._)("div",ve,(0,s.zw)(e.selectedOption.subText),1)],4)])])],6),Te])}var Ce=i(54358),Me={components:{MapComponent:Ce.Z},data(){return{capturing:!1,setImage:null,blob:null}},computed:{...(0,ie.Se)("momentMap",["selectedOption","selectedFrameSize","getAlternativeFont"]),...(0,ie.Se)("mapObj",["mapDataUrl","getMapMarker","getMapStyle","getCenter"])},mounted(){this.setMapFrame(this.$refs.product)},methods:{...(0,ie.OI)("mapObj",["setMapFrame"])}};const _e=(0,le.Z)(Me,[["render",Se],["__scopeId","data-v-f1abb2ca"]]);var De=_e,ze=i(42126),Fe={components:{AppHeader:de.Z,AppLoader:ce.Z,FrameSize:re,LocationInput:ne.Z,MapStyling:pe.Z,MapMarker:me.Z,FrameColor:ue.Z,PrintingType:ge.Z,TimeCapsulePreview:De,MapComponent:Ce.Z},data(){return{selectedTab:"preview",title:"",subTitle:"",giftingMessage:"",giftWrapping:!1,printType:null,price:null,alternativeFont:!1,loader:!1,locationAdded:!1,tabDesignValidated:!1,tabDetailsValidated:!1,focus:"",lastActiveTab:"design"}},computed:{...(0,ie.Se)("momentMap",["selectedFrameSize","selectedOption"]),...(0,ie.Se)("checkout",["getPrice","getImages"]),...(0,ie.Se)("mapObj",["mapDataUrl","getMapMarker","getMapStyle","getCenter"]),designSelected(){return"design"==this.selectedTab},detailsSelected(){return"details"==this.selectedTab},formatSelected(){return"format"==this.selectedTab},previewSelected(){return"preview"==this.selectedTab},mobileView(){return window.screen.width<1024},ctaBtnText(){return this.designSelected||this.detailsSelected?"Next":"Checkout"}},created(){document.title="Time Capsule Map",this.mobileView?this.selectedTab="preview":this.selectedTab="design",this.resetMap(),this.deleteCookies()},mounted(){(0,ze.Kf)({title:"Personalized Love Map | Time Capsule Map | The Rare Window",meta:[{name:"title",content:"Best Personalized Gifts - Time Capsule Maps | The Rare Window"},{name:"description",content:"We will provide you with a personalized love map that shows your love for your partner. Encapsulate your favorite memory with a unique time capsule map."}],link:[{rel:"canonical",href:"https://therarewindow.com/time-capsule-map"}]}),this.deleteCookies()},methods:{...(0,ie.OI)("momentMap",["setImageTitle","setImageSubTitle","setGiftingMessage","setGiftWrapping","setFrameColor","setPrintingType","setAlternativeFont"]),...(0,ie.OI)("checkout",["setProductDetails"]),...(0,ie.OI)("mapObj",["setMapStyle","setMapMarker","setCenter","resetMap"]),...(0,ie.nv)("momentMap",["createImg"]),...(0,ie.nv)("checkout",["checkPrice"]),deleteCookies(){if(document.cookie.includes("csrftoken")||document.cookie.includes("sessionid")){const e=new Date((new Date).setTime((new Date).getUTCSeconds()+1));document.cookie=`csrftoken=;expires=${e};`,document.cookie=`sessionid=;expires=${e};`}},updateMapStyle(e,t){this.deleteCookies(),this.setMapStyle({name:e.name,api:e.mapTileApi,key:t})},updateMapMarker(e,t){this.deleteCookies(),this.setMapMarker({name:e.name,index:e.id,type:e.type,image:e.image,key:t})},updateLocation(e,t){this.deleteCookies(),this.setCenter({center:e,key:t})},updatePrintType(e){this.deleteCookies(),this.setPrintingType(e),this.printType=e.name,"Digital Copy"==this.printType?(this.giftWrapping=!1,this.setGiftWrapping(this.giftWrapping),this.checkPrice("momentMap")):this.checkPrice("momentMap")},back(){this.deleteCookies(),this.designSelected&&(this.selectedTab="preview"),this.detailsSelected&&(this.selectedTab="design"),this.formatSelected&&(this.selectedTab="details")},async next(){this.deleteCookies(),this.designSelected?this.goToDetailsTab():this.detailsSelected?this.goToFormatTab():this.formatSelected&&(this.$refs.options.scrollTop=0,this.loader=!0,this.checkout(),await this.createImg().then((e=>{this.loader=!1,e&&this.$router.push("/checkout")})))},goToDetailsTab(){this.deleteCookies(),this.locationAdded?(this.$refs.options.scrollTop=0,this.selectedTab="details",this.tabDesignValidated=!0):(this.$refs.locationInput.makeFocus(),this.$toast.open({message:"Please add location.",type:"error",duration:5e3,dismissible:!0,position:"top"}),this.tabDesignValidated=!1)},goToFormatTab(){this.deleteCookies(),this.title?this.subTitle?(this.$refs.options.scrollTop=0,this.selectedTab="format",this.tabDetailsValidated=!0):(this.focus="subtitle",this.$toast.open({message:"Please add your sub title.",type:"error",duration:5e3,dismissible:!0,position:"top"}),this.tabDetailsValidated=!1):(this.focus="title",this.$toast.open({message:"Please add your title.",type:"error",duration:5e3,dismissible:!0,position:"top"}))},checkout(){this.deleteCookies(),this.setProductDetails({mapType:1,productName:this.selectedOption.productName,frameSize:this.selectedOption.frameSize,frameColor:this.selectedOption.frameColor.color,printingType:this.selectedOption.printingType,giftingMsg:this.giftingMessage,giftWrap:this.giftWrapping})}},watch:{formatSelected(e){this.deleteCookies(),e&&this.checkPrice("momentMap")},designSelected(e){this.deleteCookies(),1==e&&this.$refs.mapComponent?.resizeMap()},selectedFrameSize(e,t){this.deleteCookies(),console.log(`new: ${e}, old: ${t}`)},selectedTab(e){this.deleteCookies(),"preview"!=e&&(this.lastActiveTab=e)}}};const Pe=(0,le.Z)(Fe,[["render",Q],["__scopeId","data-v-2391ff88"]]);var We=Pe}}]);
//# sourceMappingURL=MomentMap.36b91358.js.map